<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE INTERNET CONSOLE</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background-color: black;
            color: #00FF00;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 10px;
            overflow: hidden;
            height: 100vh;
        }
        #console {
            height: calc(100vh - 40px);
            overflow-y: auto;
            scroll-behavior: smooth;
        }
        #input-line {
            display: flex;
            margin-top: 10px;
            height: 30px;
            align-items: center;
        }
        #prompt {
            margin-right: 10px;
            white-space: nowrap;
        }
        #command-input {
            background-color: transparent;
            border: none;
            color: #00FF00;
            font-family: 'Courier New', monospace;
            width: 100%;
            outline: none;
            flex-grow: 1;
            font-size: 16px;
        }
        .command {
            margin-bottom: 10px;
            color: #00FF00;
        }
        .response {
            margin-bottom: 20px;
            white-space: pre-wrap;
            color: #00FF00;
        }
        .cursor {
            display: inline-block;
            width: 8px;
            height: 16px;
            background-color: #00FF00;
            animation: blink 1s infinite;
            vertical-align: middle;
            margin-left: 2px;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        .ascii-art {
            color: #00FF00;
            line-height: 1;
            margin-bottom: 20px;
            white-space: pre;
            overflow: hidden;
            font-size: 12px;
        }
        .image-art {
            color: #00FF00;
            line-height: 1;
            margin: 10px 0;
            white-space: pre;
            text-align: center;
        }
        .music-player {
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #00FF00;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            position: relative;
        }
        .player-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
            height: 20px;
        }
        .progress-container {
            width: 100%;
            height: 15px;
            background-color: #003300;
            margin: 10px 0;
            position: relative;
        }
        .progress-bar {
            height: 100%;
            background-color: #00FF00;
            width: 0%;
        }
        .time-display {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 14px;
        }
        .player-control极s {
            text-align: center;
            margin-top: 10px;
        }
        .player-tip {
            text-align: center;
            margin-top: 10px;
            opacity: 0.7;
            font-size: 12px;
        }
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #001100;
        }
        ::-webkit-scrollbar-thumb {
            background: #003300;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #00AA00;
        }
        .matrix-rain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.3;
        }
        .time-art {
            color: #00FF00;
            line-height: 1;
            margin: 10px 0;
            white-space: pre;
            text-align: center;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div id="console">
        <div id="ascii-container" class="ascii-art"></div>
        <div id="init-message" class="response"></div>
        <div id="history"></div>
        <div id="input-line">
            <span id="prompt">C:\&gt;</span>
            <input type="text" id="command-input" autofocus>
            <span class="cursor"></span>
        </div>
    </div>

    <script>
        // Corrected ASCII art
        const asciiArt = [
            "████████╗██╗  ██╗███████╗    ",
            "╚══██╔══╝██║  ██║██╔════╝    ",
            "   ██║   ███████║█████╗      ",
            "   ██║   ██╔══██║██╔══╝      ",
            "   ██║   ██║  ██║███████╗    ",
            "   ╚═╝   ╚═╝  ╚═╝╚══════╝    ",
            "                              ",
            "██╗███╗   ██╗████████╗███████╗██████╗ ███╗   ██╗███████╗████████╗",
            "██║████╗  ██║╚══██╔══╝██╔════╝██╔══██╗████╗  ██║██╔════╝╚══██╔══╝",
            "██║██╔██╗ ██║   ██║   █████╗  ██████╔╝██╔██╗ ██║█████╗     ██║   ",
            "██║██║╚██╗██║   ██║   ██╔══╝  ██╔══██╗██║╚██╗██║██╔══╝     ██║   ",
            "██║██║ ╚████║   ██║   ███████╗██║  ██║██║ ╚████ ███████╗   ██║   ",
            "╚═╝╚═╝  ╚═══╝   ╚═╝   ╚══════╝╚═╝  ╚═╝╚═╝  ╚═══╝╚══════   ╚═╝   ",
            "                              ",
            " ██████╗ ██████╗ ███╗   ██╗███████╗ ██████╗ ██║    ███████╗",
            "██╔════╝██╔═══██╗████╗  ██║██╔════╝██╔═══██╗██║     ██╔════╝",
            "██║     ██║   ██ ██╔██╗ ██║███████╗██║   ██║██║     █████╗  ",
            "██║     ██║   ██║██║╚██╗██║╚════██║██║   ██║██║     ██╔══╝  ",
            "╚██████╗╚██████╔╝██║ ╚████║███████║╚██████╔╝███████╗███████╗",
            " ╚═════╝ ╚═════╝ ╚═╝  ╚═══╝╚══════╝ ╚═════╝ ╚══════╝╚══════╝"
        ];

        // Display ASCII art with loading animation
        const asciiContainer = document.getElementById('ascii-container');
        const initMessage = document.getElementById('init-message');
        const consoleElement = document.getElementById('console');
        const history = document.getElementById('history');
        const commandInput = document.getElementById('command-input');
        const prompt = document.getElementById('prompt');
        
        let currentRow = 0;
        let globalAudio = null;
        let isSoundPlayerActive = false;
        let soundPlayerElement = null;
        let matrixInterval = null;

        function loadNextRow() {
            if (currentRow < asciiArt.length) {
                const rowDiv = document.createElement('div');
                rowDiv.textContent = asciiArt[currentRow];
                asciiContainer.appendChild(rowDiv);
                currentRow++;
                consoleElement.scrollTop = consoleElement.scrollHeight;
                setTimeout(loadNextRow, 10);
            } else {
                const initText = "THE INTERNET CONSOLE v0.5 DEMO - Type \"help\" for available commands\nSystem initialized... Ready";
                animateText(initMessage, initText, () => {
                    commandInput.focus();
                });
            }
        }

        // Generic function to animate text
        function animateText(element, text, callback) {
            const lines = text.split('\n');
            let currentLine = 0;
            
            function showNextLine() {
                if (currentLine < lines.length) {
                    const lineDiv = document.createElement('div');
                    lineDiv.textContent = lines[current极e];
                    element.appendChild(lineDiv);
                    currentLine++;
                    consoleElement.scrollTo({
                        top: console极.scrollHeight,
                        behavior: 'smooth'
                    });
                    setTimeout(showNextLine, 10);
                } else if (callback) {
                    callback();
                }
            }
            showNextLine();
        }

        // Start loading animation
        loadNextRow();

        // Helper function to format time as mm:ss
        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        // Matrix rain effect
        function startMatrixRain() {
            const chars = "01";
            const matrixDiv = document.createElement('div');
            matrixDiv.className = 'matrix-rain';
            document.body.appendChild(matrixDiv);
            
            const columns = Math.floor(window.innerWidth / 20);
            const drops = [];
            
            for (let i = 0; i < columns; i++) {
                drops[i] = 1;
            }
            
            matrixInterval = setInterval(() => {
                const span = document.createElement('span');
                span.style.position = 'absolute';
                span.style.color = '#00FF00';
                span.style.fontSize = '20px';
                
                for (let i = 0; i < drops.length; i++) {
                    if (drops[i] * 20 > window.innerHeight && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    
                    const char = chars[Math.floor(Math.random() * chars.length)];
                    const text = document.createTextNode(char);
                    span.appendChild(text);
                    span.style.left = (i * 20) + 'px';
                    span.style.top = (drops[i] * 20) + 'px';
                    
                    drops[i]++;
                }
                
                matrixDiv.appendChild(span);
                
                // Remove old elements to prevent performance issues
                if (matrixDiv.childNodes.length > 100) {
                    matrixDiv.removeChild(matrixDiv.childNodes[0]);
                }
            }, 33);
        }
        
        function stopMatrixRain() {
            if (matrixInterval) {
                clearInterval(matrixInterval);
                matrixInterval = null;
                const matrixDiv = document.querySelector('.matrix-rain');
                if (matrixDiv) {
                    matrixDiv.remove();
                }
            }
        }
        
        // Function to convert time to ASCII art
        function timeToAscii(timeStr) {
            // Define the ASCII art for each digit
            const digits = {
                '0': ['██╗', '███║', '╚██║', ' ██║', ' ██║', ' ╚═╝'],
                '1': [' ██╗', '███║', '╚██║', ' ██║', ' ██║', ' ╚═╝'],
                '2': ['██████╗', '╚════██╗', ' █████╔╝', '██╔═══╝', '███████╗', '╚══════╝'],
                '3': ['██████╗', '╚════██╗', ' █████╔╝', ' ╚═══██╗', '██████╔╝', '╚═════╝'],
                '4': ['██╗  ██╗', '██║  ██║', '███████║', '╚════██║', '     ██║', '     ╚═╝'],
                '5': ['███████╗', '██╔════╝', '███████╗', '╚════██║', '███████║', '╚══════╝'],
                '6': [' ██████╗', '██╔════╝', '███████╗', '██╔═══██╗', '╚██████╔╝', ' ╚═════╝'],
                '7': ['███████╗', '╚════██║', '    ██╔╝', '   ██╔╝', '   ██║', '   ╚═╝'],
                '8': [' █████╗', '██╔══██╗', '╚█████╔╝', '██╔══██╗', '╚█████╔╝', ' ╚════╝'],
                '9': [' █████╗', '██╔══██╗', '╚██████║', ' ╚═══██║', ' █████╔╝', ' ╚════╝'],
                ':': ['   ', '██╗', '╚═╝', '██╗', '╚═╝', '   '],
                'A': [' █████╗', '██╔══██╗', '███████║', '██╔══██║', '██║  ██║', '╚═╝  ╚═╝'],
                'P': ['██████╗', '██╔══██╗', '██████╔╝', '██╔═══╝', '██║', '╚═╝'],
                'M': ['███╗   ███╗', '████╗ ████║', '██╔████╔██║', '██║╚██╔╝██║', '██║ ╚═╝ ██║', '╚═╝     ╚═╝']
            };
            
            let result = ['', '', '', '', '', ''];
            
            for (let i = 0; i < timeStr.length; i++) {
                const char = timeStr[i];
                if (digits[char]) {
                    for (let j = 0; j < 6; j++) {
                        result[j] += digits[char][j] + '  ';
                    }
                }
            }
            
            return result.join('\n');
        }
        
        // Command definitions
        const commands = {
            'help': function() {
                return 'Available commands:\n' +
                       'help - Show this help message\n' +
                       'cls - Clear screen\n' +
                       'dir - List directory contents\n' +
                       'tree - Display directory tree structure\n' +
                       'scan - Run system diagnostic\n' +
                       'encrypt [text] - Encrypt text\n' +
                       'decrypt [text] - Decrypt text\n' +
                       'soundplayer - Launch music player\n' +
                       'stop TICsoundplayer - Stop music player\n' +
                       'matrix - Start Matrix code rain effect\n' +
                       'stop matrix - Stop Matrix effect\n' +
                       'joke - Tell a random joke\n' +
                       'quote - Show a random quote\n' +
                       'fact - Display a random fact\n' +
                       'roll [sides] - Roll a dice (default 6 sides)\n' +
                       '8ball [question] - Ask the magic 8-ball a question\n' +
                       'weather - Display fake weather report\n' +
                       'time - Show current system time\n' +
                       'emoji - Display random emoji art\n' +
                       'exit - Close terminal (not really)';
            },
            
            'cls': function() {
                history.innerHTML = '';
                return '';
            },
            
            'dir': function() {
                return 'Volume in drive C is SYSTEM\n' +
                      'Volume Serial Number is 1A2B-3C4D\n\n' +
                      'Directory of C:\\\n\n' +
                      '05/12/2023  12:00 AM    <DIR>          bin\n' +
                      '05/12/2023  12:00 AM    <DIR>          etc\n' +
                      '05/12/2023  12:00 AM    <DIR>          lib\n' +
                      '05/12/2023  12:00 AM    <DIR>          tmp\n' +
                      '05/12/2023  12:00 AM    <DIR>          usr\n' +
                      '05/12/2023  12:00 AM            12,345 system.log\n' +
                      '05/12/2023  12:00 AM             9,876 config.ini\n' +
                      '05/12/2023  12:00 AM             5,678 secret.dat\n' +
                      '               3 File(s)         27,899 bytes\n' +
                      '               5 Dir(s)   1,024,000,000 bytes free';
            },
            
            'tree': function() {
                return 'Folder PATH listing for volume SYSTEM\n' +
                       'Volume serial number is 1A2B-3C4D\n' +
                       'C:.\n' +
                       '├───Documents\n' +
                       '│   ├───Work\n' +
                       '│   └───Personal\n' +
                       '├───Programs\n' +
                       '│   ├───Utils\n' +
                       '│   └───Games\n' +
                       '├───System\n' +
                       '│   ├───Config\n' +
                       '│   └───Logs\n' +
                       '└───Temp\n' +
                       '\n' +
                       'Total files listed: 15';
            },
            
            'scan': function() {
                return 'Running system diagnostic...\n\n' +
                       'CPU: ████████████████████ 100%\n' +
                       'Memory: ████████████████████ 100%\n' +
                       'Network: ████████████████████ 100%\n' +
                       'Security: ████████████████████ 100%\n\n' +
                       'All systems operational. No anomalies detected.';
            },
            
            'encrypt': function(args) {
                if (!args) return 'Error: No text provided\nUsage: encrypt [text]';
                return `Encrypted text: ${btoa(args)}`;
            },
            
            'decrypt': function(args) {
                if (!args) return 'Error: No text provided\nUsage: decrypt [text]';
                try {
                    return `Decrypted text: ${atob(args)}`;
                } catch (e) {
                    return 'Error: Invalid base64 string';
                }
            },
            
            'soundplayer': function() {
                if (isSoundPlayerActive) {
                    return 'Sound player is already active. Use "stop TICsoundplayer"极 to close it.';
                }
                
                isSoundPlayerActive = true;
                const responseElement = document.createElement('div');
                responseElement.className = 'response';
                history.appendChild(responseElement);
                soundPlayerElement = responseElement;
                
                // Create the player
                const playerDiv = document.createElement('div');
                playerDiv.className = 'music-player';
                
                // Create player title with animation
                const titleDiv = document.createElement('div');
                titleDiv.className = 'player-title';
                titleDiv.id = 'player-title';
                titleDiv.textContent = 'SOUND PLAYER v1.0';
                
                // Create ASCII art border with song info
                const playerContent = document.createElement('pre');
                playerContent.innerHTML = 
`╔══════════════════════════════════════════════════════════════════════════════╗
║                                                                              ║
║                        ♫ 151-earthbound because i love you ♫                 ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝`;
                
                // Create progress container
                const progressContainer = document.createElement('div');
                progressContainer.className = 'progress-container';
                
                const progressBar = document.createElement('div');
                progressBar.className = 'progress-bar';
                progressBar.id = 'music-progress';
                
                progressContainer.appendChild(progressBar);
                
                // Create time display
                const timeDisplay = document.createElement('div');
                timeDisplay.className = 'time-display';
                timeDisplay.innerHTML = '<span id="current-time">0:00</span> / <span id="total-time">0:00</span>';
                
                // Create player controls text
                const controlsInfo = document.createElement('div');
                controlsInfo.className = 'player-controls';
                controlsInfo.innerHTML = 'Initializing player...';
                
                // Create player tip
                const playerTip = document.createElement('div');
                playerTip.className = 'player-tip';
                playerTip.innerHTML = 'Type "stop TICsoundplayer" to close the player';
                
                // Assemble the player
                playerDiv.appendChild(titleDiv);
                playerDiv.appendChild(playerContent);
                playerDiv.appendChild(progressContainer);
                playerDiv.appendChild(timeDisplay);
                playerDiv.appendChild(controlsInfo);
                playerDiv.appendChild(playerTip);
                
                responseElement.appendChild(playerDiv);
                consoleElement.scrollTo({
                    top: consoleElement.scrollHeight,
                    behavior: 'smooth'
                });
                
                // Animate the title
                const spinnerChars = ['|', '/', '-', '\\'];
                let spinnerIndex = 0;
                const originalTitle = titleDiv.textContent;
                
                const spinnerInterval = setInterval(() => {
                    titleDiv.textContent = spinnerChars[spinnerIndex] + ' ' + originalTitle + ' ' + spinnerChars[spinnerIndex];
                    spinnerIndex = (spinnerIndex + 1) % spinnerChars.length;
                }, 100);
                
                // After 2.3 seconds, play the music
                setTimeout(() => {
                    clearInterval(spinnerInterval);
                    titleDiv.textContent = '♪ ' + originalTitle + ' ♪';
                    
                    // Create and play audio
                    globalAudio = new Audio('https://ia601302.us.archive.org/19/items/earthbound-ost_202201/151-%20Earthbound%20-%20Because%20I%20Love%20You.mp3');
                    globalAudio.volume = 0.7;
                    
                    // Update controls text
                    controlsInfo.textContent = 'Playing: 151-earthbound because i love you';
                    
                    // Set up time update event
                    globalAudio.addEventListener('timeupdate', function() {
                        // Update progress bar
                        const progressPercent = (globalAudio.currentTime / globalAudio.duration) * 100;
                        progressBar.style.width = progressPercent + '%';
                        
                        // Update time display
                        document.getElementById('current-time').textContent = formatTime(globalAudio.currentTime);
                        document.getElementById('total-time').textContent = formatTime(globalAudio.duration);
                    });
                    
                    // When audio ends
                    globalAudio.addEventListener('ended', function() {
                        controlsInfo.textContent = 'Playback finished. Type "soundplayer" to play again.';
                        progressBar.style.width = '0%';
                        document.getElementById('current-time').textContent = '0:00';
                    });
                    
                    // Play the audio
                    globalAudio.play().catch(error => {
                        controlsInfo.textContent = 'Error: Could not play audio. Please interact with page first.';
                    });
                    
                }, 2300);
                
                return '';
            },
            
            'stop': function(args) {
                if (args === 'TICsoundplayer') {
                    if (isSoundPlayerActive) {
                        if (globalAudio) {
                            globalAudio.pause();
                            globalAudio = null;
                        }
                        if (soundPlayerElement) {
                            soundPlayerElement.remove();
                        }
                        isSoundPlayerActive = false;
                        return 'Sound player stopped.';
                    } else {
                        return 'No active sound player to stop.';
                    }
                } else if (args === 'matrix') {
                    stopMatrixRain();
                    return 'Matrix effect stopped.';
                } else {
                    return 'Usage: stop TICsoundplayer | stop matrix';
                }
            },
            
            'matrix': function() {
                startMatrixRain();
                return 'Matrix code rain effect started. Type "stop matrix" to end it.';
            },
            
            'joke': function() {
                const jokes = [
                    "Why do programmers prefer dark mode? Because light attracts bugs!",
                    "Why do Java developers wear glasses? Because they can't C#!",
                    "There are only 10 types of people in the world: those who understand binary and those who don't.",
                    "Why was the JavaScript developer sad? Because he didn't Node how to Express himself!",
                    "How many programmers does it take to change a light bulb? None, that's a hardware problem!",
                    "Why do programmers always mix up Christmas and Halloween? Because Oct 31 == Dec 25!",
                    "What do you call a programmer from Finland? Nerdic!",
                    "Why do programmers hate nature? It has too many bugs!",
                    "How do you comfort a JavaScript bug? You console it!",
                    "Why did the programmer quit his job? Because he didn't get arrays!"
                ];
                return jokes[Math.floor(Math.random() * jokes.length)];
            },
            
            'quote': function() {
                const quotes = [
                    "The best way to predict the future is to invent it. - Alan Kay",
                    "The computer was born to solve problems that did not exist before. - Bill Gates",
                    "Software is a great combination between artistry and engineering. - Bill Gates",
                    "The most disastrous thing that you can ever learn is your first programming language. - Alan Kay",
                    "The only way to learn a new programming language is by writing programs in it. - Dennis Ritchie",
                    "First, solve the problem. Then, write the code. - John Johnson",
                    "Code is like humor. When you have to explain it, it's bad. - Cory House",
                    "Programming isn't about what you know; it's about what you can figure out. - Chris Pine",
                    "The only way to go fast is to go well. - Robert C. Martin",
                    "Truth can only be found in one place: the code. - Robert C. Martin"
                ];
                return quotes[Math.floor(Math.random() * quotes.length)];
            },
            
            'fact': function() {
                const facts = [
                    "The first computer virus was created in 1983 and was called 'Elk Cloner'.",
                    "The first computer mouse was made of wood.",
                    "The first 1GB hard drive was made in 1980 and weighed about 550 pounds.",
                    "The programming language 'Python' is named after the comedy series 'Monty Python'.",
                    "There are over 700 programming languages in existence.",
                    "The first computer programmer was a woman named Ada Lovelace.",
                    "The world's first website is still online: http://info.cern.ch",
                    "The average person blinks 15-20 times per minute, but only 5-10 times per minute when using a computer.",
                    "The QWERTY keyboard layout was designed to slow down typists to prevent jamming on old typewriters.",
                    "The first email was sent in 1971 by极 Ray Tomlinson."
                ];
                return facts[Math.floor(Math.random() * facts.length)];
            },
            
            'roll': function(args) {
                const sides = args ? parseInt(args) : 6;
                if (isNaN(sides) || sides < 2) {
                    return 'Error: Please specify a valid number of sides (minimum 2)';
                }
                return `You rolled a ${Math.floor(Math.random() * sides) + 1} (d${sides})`;
            },
            
            '8ball': function(args) {
                if (!args) return 'Error: Please ask a question\nUsage: 8ball [question]';
                
                const responses = [
                    "It is certain.",
                    "It is decidedly so.",
                    "Without a doubt.",
                    "Yes - definitely.",
                    "You may rely on it.",
                    "As I see it, yes.",
                    "Most likely.",
                    "Outlook good.",
                    "Yes.",
                    "Signs point to yes.",
                    "Reply hazy, try again.",
                    "Ask again later.",
                    "Better not tell you now.",
                    "Cannot predict now.",
                    "Concentrate and ask again.",
                    "Don't count on it.",
                    "My reply is no.",
                    "My sources say no.",
                    "Outlook not so good.",
                    "极Very doubtful."
                ];
                return `🎱 ${responses[Math.floor(Math.random() * responses.length)]}`;
            },
            
            'weather': function() {
                const conditions = ["sunny", "cloudy", "rainy", "stormy", "snowy", "windy"];
                const temps = [72, 68, 65, 80, 55, 60, 75, 70];
                const cities = ["New York", "London", "Tokyo", "Sydney", "Paris", "Berlin", "Moscow", "Toronto"];
                
                const city = cities[Math.floor(Math.random() * cities.length)];
                const condition = conditions[Math.floor(Math.random() * conditions.length)];
                const temp = temps[Math.floor(Math.random() * temps.length)];
                const humidity = Math.floor(Math.random() * 40) + 50;
                
                return `Weather report for ${city}:\nCondition: ${condition}\nTemperature: ${temp}°F\nHumidity: ${humidity}%`;
            },
            
            'time': function() {
                const now = new Date();
                const timeStr = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                const dateStr = now.toLocaleDateString();
                
                const timeArt = timeToAscii(timeStr);
                
                return `Current system time:\n${timeArt}\n\nCurrent date: ${dateStr}`;
            },
            
            'emoji': function() {
                const emojis = [
                    "😊 Smiling face",
                    "😂 Face with tears of joy",
                    "🤣 Rolling on the floor laughing",
                    "😍 Smiling face with heart-eyes",
                    "🤩 Star-struck",
                    "😎 Smiling face with sunglasses",
                    "🧐 Face with monocle",
                    "🤖 Robot",
                    "👾 Alien monster",
                    "🐱 Cat face",
                    "🐶 Dog face",
                    "🦊 Fox",
                    "🐼 Panda",
                    "🐨 Koala",
                    "🦁 Lion",
                    "🐯 Tiger face",
                    "🐮 Cow face",
                    "🐷 Pig face",
                    "🐸 Frog face",
                    "🐙 Octopus"
                ];
                return emojis[Math.floor(Math.random() * emojis.length)];
            },
            
            'exit': function() {
                if (globalAudio) {
                    globalAudio.pause();
                    globalAudio = null;
                }
                if (isSoundPlayerActive && soundPlayerElement) {
                    soundPlayerElement.remove();
                    isSoundPlayerActive = false;
                }
                stopMatrixRain();
                return 'Closing terminal is not permitted from this interface.';
            }
        };

        // Process commands
        function processCommand(input) {
            const parts = input.split(' ');
            const cmd = parts[0].toLowerCase();
            const args = parts.slice(1).join(' ');
            
            // Add to history
            addToHistory(input);
            
            if (cmd in commands) {
                const response = commands[cmd](args);
                if (response !== '') {
                    animateResponse(response);
                }
            } else {
                animateResponse(`'${cmd}' is not recognized as an internal or external command,\noperable program or batch file.`);
            }
        }
        
        function addToHistory(command) {
            const commandElement = document.createElement('div');
            commandElement.className = 'command';
            commandElement.textContent = `${prompt.textContent} ${command}`;
            history.appendChild(commandElement);
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }
        
        function animateResponse(response) {
            const responseElement = document.createElement('div');
            responseElement.className = 'response';
            history.appendChild(responseElement);
            
            const lines = response.split('\n');
            let currentLine = 0;
            
            function showNextLine() {
                if (currentLine < lines.length) {
                    const lineDiv = document.createElement('div');
                    lineDiv.textContent = lines[currentLine];
                    responseElement.appendChild(lineDiv);
                    currentLine++;
                    consoleElement.scrollTo({
                        top: consoleElement.scrollHeight,
                        behavior: 'smooth'
                    });
                    setTimeout(showNextLine, 10);
                } else {
                    consoleElement.scrollTo({
                        top: consoleElement.scrollHeight,
                        behavior: 'smooth'
                    });
                    commandInput.focus();
                }
            }
            showNextLine();
        }
        
        // Set up command input listener
        commandInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                // Skip processing if input is empty
                if (this.value.trim() === '') {
                    return;
                }
                processCommand(this.value);
                this.value = '';
            }
        });

        // Make sure the console is always scrolled to the bottom
        setInterval(() => {
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }, 100);
    </script>
</body>
</html>
